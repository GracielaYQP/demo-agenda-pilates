.wrap { max-width: 1360px; margin: 24px auto; padding: 0 12px; }

.filtros{
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  align-items:flex-end;
  justify-content: center;
  margin:10px 0 18px;
  background:#f5f5f5;
  padding:12px 16px;
  border-radius:10px;
}

.filtros label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:.9rem;
  font-weight:600;
  color:#747373;
}

.filtros select,
.filtros input{
  padding:8px 10px;
  border-radius:8px;
  border:1px solid #ddd;
  background:#fff;
  min-width:120px;
}

.filtros select:focus,
.filtros input:focus{
  outline:none;
  border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(181,52,144,.2);
}

.loading, .error { padding:10px 12px; border-radius:8px; }
.loading { background:#f5f5f5; }
.error { background:#ffe5e5; color:#b00020; }

.cards { display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; margin-bottom:16px; }
.card { background:#fff; border-radius:12px; padding:14px; box-shadow:0 8px 20px rgba(0,0,0,.08); }
.kpi-title { margin:0; color:#666; font-size:.9rem; }
.kpi-value { margin:4px 0 0; font-weight:700; font-size:1.4rem; }
.kpi-sub { margin:6px 0 0; color:#444; font-size:.95rem; }

.charts { display:grid; grid-template-rows: 1fr 1fr; gap:12px; margin-bottom:16px; }
.panel { background:#fff; border-radius:12px; padding:14px; box-shadow:0 8px 20px rgba(0,0,0,.08); }
.panel h3 { margin:0 0 10px; color:#333; }

/* Barras horizontales (por plan) */
.bars { display:flex; flex-direction:column; gap:8px; }
.bar { display:grid; grid-template-columns: 80px 1fr 100px; align-items:center; gap:8px; }
.bar-label { color:#555; }
.bar-fill { height:12px; border-radius:8px; background:linear-gradient(90deg, var(--primary), var(--secondary)); width: calc(var(--pct, 0) * 1%); transition: width .3s; }
.bar-value { text-align:right; color:#333; }

/* “Línea” simple (de hecho columnas) */
.line { display:flex; align-items:flex-end; gap:6px; height:160px; padding:6px; border:1px dashed #ddd; border-radius:8px; }
.line-point { width:16px; position:relative; }
.line-dot { position:absolute; bottom:calc(100% - 8px); left:50%; transform:translateX(-50%); width:8px; height:8px; border-radius:50%; background:#b53490; }
.line-x { position:absolute; bottom:-18px; left:50%; transform:translateX(-50%); font-size:.7rem; color:#777; }

/* =========================
   TABLAS: SCROLL HORIZONTAL + COLUMNA "ALUMNO" FIJA
   ========================= */

.table-scroll{
  position: relative;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  width: 100%;
  max-width: 100%;
  border-radius: 12px;
}

/* ✅ clave: que la tabla mida por contenido para que haya overflow */
.table-scroll > .table{
  width: max-content;
  min-width: 100%;
  border-collapse: collapse;
}

/* ✅ compactar un poco (opcional pero recomendado) */
.table-scroll > .table th,
.table-scroll > .table td{
  padding: 6px 8px;
  white-space: nowrap;
  text-align: left;
}

 /* Tabla general */
.table{
  width:100%;
  border-collapse:collapse;
}

.table th, .table td{
  border:1px solid #eee;
  padding:8px;
  text-align:left;
  white-space:nowrap;
}

.table thead th{
  background:#faf7f9;
  color:#333;
  position: sticky;
  top: 0;
  z-index: 2;
}

.table tr.atrasado{ background:#fff3f3; }
.table .empty{ text-align:center; color:#666; }

.acciones a{ margin-right:8px; }

/* Botón */
.btn-registrar{
  background:var(--primary);
  color:#fff;
  border:0;
  border-radius:8px;
  padding:6px 10px;
  cursor:pointer;
}
.btn-registrar:hover{ filter:brightness(.95); }

/* Columna 1 fija ("Alumno") - requiere clases en HTML:
   <table class="table tabla-cobros"> y <table class="table tabla-deudores">
*/
.tabla-cobros th:nth-child(1),
.tabla-cobros td:nth-child(1),
.tabla-deudores th:nth-child(1),
.tabla-deudores td:nth-child(1){
  max-width: 180px;         /* ajustá: 160-220 según gusto */
  overflow: hidden;
  text-overflow: ellipsis;
  position: sticky;
  left: 0;
  z-index: 3;
  background: #fff;
  box-shadow: 6px 0 12px rgba(0,0,0,.06);
}

.tabla-cobros td:nth-child(1) a,
.tabla-cobros td:nth-child(1) span,
.tabla-deudores td:nth-child(1) a,
.tabla-deudores td:nth-child(1) span{
  display: inline-block;
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  vertical-align: bottom;
}

/* Esquina superior izquierda (header + col fija) */
.tabla-cobros thead th:nth-child(1),
.tabla-deudores thead th:nth-child(1){
  z-index: 4;
  background: #faf7f9;
}

/* Pista visual de scroll */
.table-scroll::after{
  content:"";
  position:absolute;
  top:0;
  right:0;
  width:28px;
  height:100%;
  pointer-events:none;
  background: linear-gradient(to left, rgba(255,255,255,1), rgba(255,255,255,0));
}

/* Ajuste fino: mínimo distinto según tabla */
.tabla-cobros{ min-width: 860px; }
.tabla-deudores{ min-width: 900px; }

/* =========================
   <= 768px (tablets)
   ========================= */
@media (max-width: 768px){
  .wrap{ padding:0 10px; }

  h2{
    font-size: clamp(1.2rem, 3.5vw, 1.4rem);
    padding: 12px 14px;
    margin: 12px auto 20px;
  }

  .filtros{
    gap:10px;
    padding:10px 12px;
    align-items:stretch;
  }
  .filtros label{
    flex:1 1 160px;
    font-size:.9rem;
  }
  .filtros select,
  .filtros input{
    width:100%;
    min-width:unset;
  }

  .cards{ grid-template-columns: repeat(2, 1fr); }
  .charts{ grid-template-columns: 1fr; }

  .bar{ grid-template-columns: 70px 1fr 80px; gap:6px; }
  .line{ height:140px; }

  /* tabla más compacta (SIN ocultar columnas) */
  .table th, .table td{
    padding:6px;
    font-size:.92rem;
  }

  .tabla-cobros th:nth-child(1),
  .tabla-cobros td:nth-child(1),
  .tabla-deudores th:nth-child(1),
  .tabla-deudores td:nth-child(1){
    max-width: 150px;
  }

  .tabla-cobros td:nth-child(1) a,
  .tabla-cobros td:nth-child(1) span,
  .tabla-deudores td:nth-child(1) a,
  .tabla-deudores td:nth-child(1) span{
    max-width: 150px;
  }
}

/* =========================
   <= 480px (móvil)
   ========================= */
@media (max-width: 480px){
  .wrap{ padding:0 8px; }

  h2{
    font-size: clamp(1.05rem, 5vw, 1.2rem);
    padding: 10px 12px;
    margin: 10px auto 16px;
  }

  .filtros{
    gap:8px;
    padding:10px;
    border-radius:8px;
  }
  .filtros label{
    flex:1 1 120px;
    font-size:.85rem;
    gap:4px;
  }

  .cards{ grid-template-columns: 1fr; }
  .charts{ grid-template-columns: 1fr; }

  .bar{ grid-template-columns: 58px 1fr 64px; gap:6px; }
  .bar-label{ font-size:.85rem; }
  .bar-value{ font-size:.85rem; }

  .line{ height:120px; }

  /* tabla compacta (SIN ocultar columnas) */
  .table th, .table td{
    padding:6px 4px;
    font-size:.88rem;
  }

  .btn-registrar{
    padding:8px 10px;
  }
}

/* =========================
   FIX SCROLL TABLAS (solo finanzas dashboard)
   ========================= */

/* grid children can overflow only if min-width:0 */
.charts,
.panel{
  min-width: 0;
}

.panel{
  overflow: visible;
}

.table-scroll{
  overflow-x: auto !important;
  overflow-y: hidden !important;
  -webkit-overflow-scrolling: touch;
  width: 100%;
  max-width: 100%;
  min-width: 0;
  touch-action: pan-x;
}

.table-scroll > .table{
  width: max-content !important;
  min-width: 100% !important;
}
